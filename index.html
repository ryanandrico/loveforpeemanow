<!-- Save this file as LoveForPeeManow.html
     Put your music file named exactly: music.mp3
     (same folder). Save with UTF-8 encoding.
     Then open LoveForPeeManow.html in a browser (mobile works).
-->

<!doctype html>

<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ถึง พี่มะนาวคนสวย — ขอโทษนะ</title>

  <!-- Fonts -->

  <link href="https://fonts.googleapis.com/css2?family=Sriracha&family=Kanit:wght@300;500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1: #3a0b2f;  /* deep pink */
      --bg2: #6b2b60;  /* warm purple-pink */
      --accent: #ffd1dc; /* soft pink */
      --text: #fff6f8;
      --card-bg: rgba(255,255,255,0.02);
    }

    /* animated gradient background */
    @keyframes bgShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    html,body{
      height:100%;
      margin:0;
      font-family:'Kanit',sans-serif;
      background: linear-gradient(120deg,var(--bg1),var(--bg2));
      background-size: 400% 400%;
      animation: bgShift 18s ease infinite;
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .wrap{
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
    }

    .card{
      width:100%;
      max-width:820px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:20px;
      box-shadow:0 18px 60px rgba(20,5,20,0.55);
      padding:36px;
      position:relative;
      overflow:hidden;
      -webkit-backdrop-filter: blur(2px);
      backdrop-filter: blur(2px);
    }

    /* soft moon/glow */
    .moon{
      position:absolute;
      right:-80px;
      top:-120px;
      width:360px;
      height:360px;
      background: radial-gradient(circle at 30% 30%, #fff0f3 0%, #ffe6ef 15%, #ffdcea 25%, rgba(255,220,235,0.35) 40%, transparent 70%);
      filter: blur(10px);
      opacity:0.95;
      transform: rotate(8deg);
      pointer-events:none;
    }
    .glow{
      position:absolute;
      left:-140px;
      bottom:-140px;
      width:480px;
      height:480px;
      background: radial-gradient(circle,#ffd9e6 0%,transparent 40%);
      filter: blur(30px);
      opacity:0.06;
      pointer-events:none;
    }

    h1{
      font-family:'Sriracha',cursive;
      font-size:46px;
      margin:0 0 6px 0;
      color:var(--accent);
      text-shadow:0 6px 20px rgba(0,0,0,0.45);
      letter-spacing:0.6px;
    }
    h2{ font-weight:500; font-size:18px; margin:0 0 18px 0; color:#fff8ea; }

    .message{
      font-size:18px;
      line-height:1.7;
      color:#fff9fb;
      opacity:0;
      transform: translateY(12px);
    }
    .message.show{ opacity:1; transform:none; transition: opacity .9s ease, transform .9s ease; }

    .small{ font-size:14px; color:#ffe9f0; margin-top:8px; }

    /* Forgive button */
    #forgiveBtn{
      display:inline-block;
      margin-top:22px;
      padding:12px 18px;
      border-radius:999px;
      background: linear-gradient(90deg,#ffb6c1,#ffd1dc);
      color:#3b0b2a;
      font-weight:700;
      border:none;
      cursor:pointer;
      box-shadow:0 10px 28px rgba(255,180,205,0.18);
      position:relative;
      z-index:9999; /* ensure on top */
      transition: transform .15s ease, box-shadow .15s ease;
      outline:none;
      -webkit-tap-highlight-color: transparent;
    }

    #forgiveBtn:hover{ transform: translateY(-3px); box-shadow:0 14px 36px rgba(255,180,205,0.22); }
    #forgiveBtn:active{ transform: translateY(-1px); }

    /* pulsing glow */
    @keyframes pulse {
      0% { box-shadow: 0 10px 24px rgba(255,182,197,0.18), 0 0 0 0 rgba(255,182,197,0.0); }
      50% { box-shadow: 0 18px 46px rgba(255,182,197,0.24), 0 0 30px 6px rgba(255,182,197,0.06); }
      100% { box-shadow: 0 10px 24px rgba(255,182,197,0.18), 0 0 0 0 rgba(255,182,197,0.0); }
    }
    #forgiveBtn.pulse{ animation: pulse 2.6s infinite; }

    .center{ display:flex; align-items:center; gap:14px; flex-wrap:wrap; }

    /* hearts layer (full-screen inside card) */
    .hearts{
      position:absolute;
      left:0; right:0; top:0; bottom:0;
      pointer-events:none;
      overflow:hidden;
      z-index:500; /* under button (button has higher z-index) */
    }

    .heart{
      position:absolute;
      width:18px; height:18px;
      background: linear-gradient(180deg,#fff0f5,#ffd1e0);
      transform: rotate(45deg);
      opacity:0;
      border-radius:4px;
      filter: drop-shadow(0 6px 16px rgba(255,150,180,0.14));
    }
    .heart:before,.heart:after{
      content:''; position:absolute; width:18px; height:18px;
      background: linear-gradient(180deg,#fff0f5,#ffd1e0); border-radius:50%;
    }
    .heart:before{ top:-9px; left:0; }
    .heart:after{ left:-9px; top:0; }

    footer{ margin-top:14px; color: rgba(255,230,235,0.8); font-size:13px; }
    .controls{ display:flex; gap:10px; align-items:center; }
    .icon{ width:44px; height:44px; display:inline-grid; place-items:center; border-radius:50%; background:rgba(255,255,255,0.03); font-weight:700; cursor:default; }

    /* make sure clickable pointers show */
    #forgiveBtn, .icon { cursor: pointer; }

    @media(max-width:520px){
      h1{ font-size:34px; }
      .card{ padding:20px; }
      .icon{ width:40px; height:40px; }
    }
  </style>

</head>
<body>
  <div class="wrap">
    <div class="card" role="main">
      <div class="moon" aria-hidden="true"></div>
      <div class="glow" aria-hidden="true"></div>

```
  <h1>ถึง พี่มะนาวคนสวย</h1>
  <h2>ขอโทษจริง ๆ นะ จากใจของเค้าเลย</h2>

  <div id="messages">
    <p class="message" id="m1">เค้ารู้ว่าเค้าทำผิด เค้าทำให้พี่เสียใจ แล้วเค้าเสียใจมากจริง ๆ</p>
    <p class="message" id="m2">เค้าคิดถึงพี่มาก ๆ เลยนะ หลังจากเมื่อคืน เหมือนระยะทางมันยิ่งไกลกว่าเดิมอีก</p>
    <p class="message" id="m3">พี่คือทุกอย่างของเค้าเลย เค้าจะพิสูจน์ให้เห็นด้วยการเปลี่ยนตัวเอง ไม่ใช่แค่พูดเฉย ๆ</p>
    <p class="message" id="m4">เค้ารู้ว่าเค้าทำให้ความเชื่อใจของพี่พัง แต่เค้าไม่ยอมแพ้นะ ขอให้เค้ามีโอกาสแก้ไขอีกครั้งได้ไหม</p>
    <p class="message" id="m5">ถ้าพี่ยังให้อภัยได้ กดปุ่มข้างล่างนี้เลยนะ แต่ถ้ายังไม่พร้อม เค้าก็จะรอ และพยายามต่อไปเรื่อย ๆ</p>
  </div>

  <div class="center">
    <button id="forgiveBtn" class="btn pulse">กดตรงนี้ถ้ายกโทษให้เค้านะ ❤️</button>

    <div class="controls" aria-hidden="true">
      <div class="icon" id="playIcon">▶</div>
      <div class="small">เพลง: ใส่ไฟล์ music.mp3 แล้วกดปุ่มข้างล่างเพื่อเริ่ม</div>
    </div>
  </div>

  <footer>จาก <strong style="color:var(--accent)">杨肃贺 Ryan Andrico</strong></footer>

  <div class="hearts" id="hearts"></div>

  <!-- Hidden audio element (no visible player). Put music.mp3 in same folder. -->
  <audio id="bgm" loop preload="auto" style="display:none">
    <source src="music.mp3" type="audio/mpeg" />
  </audio>
</div>
```

  </div>

  <script>
    // sequence show
    const msgs = Array.from(document.querySelectorAll('.message'));
    function showSequence(){
      let delay = 700;
      msgs.forEach((p,i)=>{
        setTimeout(()=> p.classList.add('show'), delay);
        delay += 2400;
      });
    }

    // audio handling (hidden)
    const audio = document.getElementById('bgm');
    const playIcon = document.getElementById('playIcon');
    let playing = false;
    // play icon is decorative; actual play triggered on forgive click.
    playIcon.addEventListener('click', ()=>{
      if(!audio) return;
      if(!playing){
        audio.play().catch(()=>{});
        playing = true; playIcon.textContent = '⏸';
      } else {
        audio.pause(); playing=false; playIcon.textContent='▶';
      }
    });

    // button and final popup + start infinite hearts
    const forgiveBtn = document.getElementById('forgiveBtn');
    const heartsLayer = document.getElementById('hearts');

    forgiveBtn.addEventListener('click', ()=>{
      // ensure audio plays after user interaction
      if(audio && !playing){
        audio.play().catch(()=>{});
        playing = true; playIcon.textContent = '⏸';
      }

      // disable and fade the button slightly
      forgiveBtn.disabled = true;
      forgiveBtn.style.opacity = 0.95;
      forgiveBtn.classList.remove('pulse');

      // fade out messages quickly
      msgs.forEach((p,i)=>{ p.style.transition='opacity .6s ease, transform .6s ease'; p.style.opacity=0; p.style.transform='translateY(-8px)'; });

      // show instant final popup
      setTimeout(()=>{
        const final = document.createElement('div');
        final.style.padding='18px';
        final.style.borderRadius='14px';
        final.style.background='linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))';
        final.style.boxShadow='0 10px 30px rgba(0,0,0,0.45)';
        final.style.textAlign='center';
        final.style.zIndex = 9998;
        final.innerHTML = `<p style="font-size:20px;margin:0 0 8px 0;color:var(--accent);font-family:'Sriracha',cursive">ขอบคุณที่ให้อภัยนะ</p>
                           <p id="heartline" style="margin:0 0 10px 0;font-size:16px;color:#fffefc;">เค้ารักพี่มะนาวคนสวยที่สุดเลย 💕</p>
                           <p style="margin:0;font-size:13px;color:rgba(255,240,240,0.95)">จาก 杨肃贺 Ryan Andrico</p>`;
        forgiveBtn.parentNode.insertBefore(final, forgiveBtn.nextSibling);

        // small pulse effect around the name line
        const hline = document.getElementById('heartline');
        hline.animate([
          { transform: 'scale(0.96)', opacity: 0.9 },
          { transform: 'scale(1.04)', opacity: 1 },
          { transform: 'scale(1)', opacity: 1 }
        ], { duration: 520, easing: 'ease-out' });

      }, 650);

      // start infinite hearts
      startHeartsInfinity();
    });

    // infinite hearts spawning
    let heartsRunning = false;
    function startHeartsInfinity(){
      if(heartsRunning) return;
      heartsRunning = true;
      // spawn small groups repeatedly
      setInterval(()=> spawnHeart(Math.floor(1 + Math.random()*2)), 220);
    }

    function spawnHeart(n){
      for(let i=0;i<n;i++){
        const h = document.createElement('div');
        h.className = 'heart';
        const startX = Math.random()*86 + 6; // 6% - 92%
        const startY = 88 + Math.random()*10; // near bottom
        h.style.left = startX + '%';
        h.style.top = startY + '%';
        const scale = 0.8 + Math.random()*1.6;
        h.style.transform = `rotate(45deg) scale(${scale})`;
        heartsLayer.appendChild(h);
        animateHeartForever(h);
      }
      // cleanup occasionally to prevent too many nodes
      setTimeout(()=>{
        const nodes = heartsLayer.querySelectorAll('.heart');
        if(nodes.length > 200){
          for(let k=0;k<80;k++){ if(nodes[k]) nodes[k].remove(); }
        }
      }, 9000);
    }

    function animateHeartForever(el){
      const dur = 6000 + Math.random()*7000;
      const dx = (Math.random()*220-110);
      const dy = -(380 + Math.random()*520);
      const rot = Math.random()*360 - 180;
      el.animate([
        { transform: el.style.transform + ' translateY(0px) translateX(0px)', opacity:1 },
        { transform: el.style.transform + ` translateY(${dy}px) translateX(${dx}px) rotate(${rot}deg)`, opacity:0 }
      ], { duration: dur, iterations: 1, easing: 'linear' }).onfinish = ()=>{ el.remove(); };
    }

    // init message sequence
    setTimeout(showSequence, 700);

    // accessibility: Enter triggers
    forgiveBtn.addEventListener('keyup', (e)=>{ if(e.key==='Enter') forgiveBtn.click(); });

    // audio error helper
    if(audio){
      audio.addEventListener('error', ()=>{ playIcon.style.opacity=0.6; playIcon.title='ไม่พบไฟล์ music.mp3 (วางไฟล์ไว้ในโฟลเดอร์เดียวกัน)'; });
    }
  </script>

</body>
</html>
